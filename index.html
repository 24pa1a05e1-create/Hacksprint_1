<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Agriculture App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f4ff; }
    .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    h2 { color: #1565c0; }
    input, select, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 6px; border: 1px solid #ccc; font-size: 16px; }
    button { background: #1565c0; color: white; font-weight: bold; cursor: pointer; }
    button:hover { background: #0d47a1; }
    .hidden { display: none; }
    img { width: 100%; max-height: 280px; object-fit: cover; margin: 12px 0; border-radius: 10px; }
    .expense-box { background: #e3f2fd; padding: 12px; border-radius: 8px; margin-top: 12px; }
    .calendar-box { background: #f1f8ff; border-left: 4px solid #1565c0; padding: 12px; border-radius: 6px; margin-top: 15px; }
    ul { line-height: 1.8; }
  </style>
</head>
<body>
  <div class="container">

    <!-- LOGIN -->
    <div id="loginPage">
      <h2>Farmer Login</h2>
      <input type="text" id="loginUsername" placeholder="Username">
      <input type="password" id="loginPassword" placeholder="Password">
      <button onclick="login()">Login</button>
      <p>Don't have an account? <a href="#" onclick="showSignup()">Sign Up</a></p>
    </div>

    <!-- SIGNUP -->
    <div id="signupPage" class="hidden">
      <h2>Create Account</h2>
      <input type="text" id="signupName" placeholder="Full Name">
      <input type="text" id="signupUsername" placeholder="Username">
      <input type="password" id="signupPassword" placeholder="Password">
      <input type="text" id="signupPhone" placeholder="Phone Number">
      <button onclick="signup()">Sign Up</button>
      <p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
    </div>

    <!-- FARM DETAILS -->
    <div id="farmPage" class="hidden">
      <h2>Farm Details</h2>
      <input type="number" id="fieldSize" placeholder="Field Size (in acres)">
      <select id="season">
        <option value="">Select Season</option>
        <option value="summer">Summer</option>
        <option value="monsoon">Monsoon</option>
        <option value="winter">Winter</option>
      </select>
      <button onclick="saveFarmDetails()">Continue</button>
    </div>

    <!-- TASK PAGE -->
    <div id="taskPage" class="hidden">
      <h2>Farm Tasks</h2>
      <div id="taskProgress" class="hidden"></div>

      <div id="taskSelection">
        <select id="taskSelect" onchange="showTaskImage()">
          <option value="">-- Choose Task --</option>
          <option value="seeding">ðŸŒ± Seeding</option>
          <option value="watering">ðŸ’§ Watering</option>
          <option value="harvesting">ðŸŒ¾ Harvesting</option>
        </select>
        <img id="taskImage" class="hidden" src="" alt="Task Image">
        <button onclick="calculateTask()">Get Recommendations</button>
      </div>

      <div id="taskOutput" class="expense-box"></div>
      <div id="taskCalendar" class="calendar-box hidden"></div>
      <br>
      <button onclick="showExpenses()">ðŸ’° View Expenses</button>
      <button onclick="showNotifications()">ðŸ”” View Notifications</button>
    </div>

    <!-- EXPENSES -->
    <div id="expensePage" class="hidden">
      <h2>Expense Summary</h2>
      <div id="expenseList" class="expense-box"></div>
      <button onclick="showTasks()">Back to Tasks</button>
    </div>

    <!-- NOTIFICATIONS -->
    <div id="notifyPage" class="hidden">
      <h2>Reminders</h2>
      <ul>
        <li>ðŸ’§ Irrigate the field every 3 days.</li>
        <li>ðŸŒ± Apply fertilizer or pesticide on schedule.</li>
        <li>ðŸŒ¾ Reminder: Harvest dates are approaching.</li>
        <li>ðŸ’° Payment due reminders.</li>
      </ul>
      <button onclick="showTasks()">Back to Tasks</button>
    </div>

  </div>

  <script>
    let user = {};
    let farm = {};
    let expenses = [];
    let activeTask = null;

    function showSignup() {
      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("signupPage").classList.remove("hidden");
    }
    function showLogin() {
      document.getElementById("signupPage").classList.add("hidden");
      document.getElementById("loginPage").classList.remove("hidden");
    }
    function signup() {
      user = {
        name: document.getElementById("signupName").value,
        username: document.getElementById("signupUsername").value,
        password: document.getElementById("signupPassword").value,
        phone: document.getElementById("signupPhone").value
      };
      alert("Signup successful! Please login.");
      showLogin();
    }
    function login() {
      let uname = document.getElementById("loginUsername").value;
      let pass = document.getElementById("loginPassword").value;
      if (uname === user.username && pass === user.password) {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("farmPage").classList.remove("hidden");
      } else {
        alert("Invalid credentials!");
      }
    }
    function saveFarmDetails() {
      farm.size = parseFloat(document.getElementById("fieldSize").value);
      farm.season = document.getElementById("season").value;
      if (!farm.size || !farm.season) {
        alert("Please enter all details!");
        return;
      }
      document.getElementById("farmPage").classList.add("hidden");
      document.getElementById("taskPage").classList.remove("hidden");
      checkTaskProgress();
    }

    function checkTaskProgress() {
      let progressDiv = document.getElementById("taskProgress");
      let selectionDiv = document.getElementById("taskSelection");
      if (activeTask) {
        progressDiv.innerHTML = `<b>Current Task:</b> ${activeTask.task}<br>
        Estimated Cost: â‚¹${activeTask.cost}<br>
        Duration: ${activeTask.duration} days<br>
        Requirements: ${activeTask.details}<br><br>
        <button onclick="completeTask()">Mark as Completed</button>`;
        progressDiv.classList.remove("hidden");
        selectionDiv.classList.add("hidden");
      } else {
        progressDiv.classList.add("hidden");
        selectionDiv.classList.remove("hidden");
      }
    }

    function showTaskImage() {
      let task = document.getElementById("taskSelect").value;
      let img = document.getElementById("taskImage");
      if (task === "seeding") img.src = "https://source.unsplash.com/900x500/?seeds,farm";
      else if (task === "watering") img.src = "https://source.unsplash.com/900x500/?irrigation,water";
      else if (task === "harvesting") img.src = "https://source.unsplash.com/900x500/?harvest,wheat";
      if (task) img.classList.remove("hidden");
      else img.classList.add("hidden");
    }

    function calculateTask() {
      let task = document.getElementById("taskSelect").value;
      let output = document.getElementById("taskOutput");
      let calendar = document.getElementById("taskCalendar");
      let cost = 0, duration = 0, details = "";

      if (task === "seeding") {
        let seedCost = farm.size * 1000;
        let fertCost = farm.size * 500;
        let labor = farm.size * 1500;
        cost = seedCost + fertCost + labor;
        duration = 7;
        details = `Seeds â‚¹${seedCost}, Fertilizer â‚¹${fertCost}, Labor â‚¹${labor}`;
      }
      else if (task === "watering") {
        let water = farm.size * 800;
        cost = water;
        duration = 3;
        details = `Irrigation & Pump â‚¹${water}`;
      }
      else if (task === "harvesting") {
        let machine = farm.size * 2000;
        cost = machine;
        duration = 5;
        details = `Threshing Machine â‚¹${machine}`;
      }

      if (cost > 0) {
        output.innerHTML = `<b>Estimated Cost:</b> â‚¹${cost}<br>${details}<br><br>
        <button onclick="confirmPurchase('${task}',${cost},${duration},'${details}')">Confirm Purchase</button>`;
        calendar.innerHTML = `<b>Task Schedule:</b><br>
        Duration: ${duration} days<br>
        Requirements: ${details}`;
        calendar.classList.remove("hidden");
      }
    }

    function confirmPurchase(task, cost, duration, details) {
      expenses.push({ task, cost });
      activeTask = { task, cost, duration, details };
      alert(`${task} started and expense recorded.`);
      checkTaskProgress();
    }

    function completeTask() {
      alert(`${activeTask.task} completed!`);
      activeTask = null;
      checkTaskProgress();
    }

    function showExpenses() {
      document.getElementById("taskPage").classList.add("hidden");
      document.getElementById("expensePage").classList.remove("hidden");
      let list = expenses.map(e => `${e.task}: â‚¹${e.cost}`).join("<br>");
      let total = expenses.reduce((sum, e) => sum + e.cost, 0);
      document.getElementById("expenseList").innerHTML = list + `<br><b>Total: â‚¹${total}</b>`;
    }

    function showTasks() {
      document.getElementById("expensePage").classList.add("hidden");
      document.getElementById("notifyPage").classList.add("hidden");
      document.getElementById("taskPage").classList.remove("hidden");
      checkTaskProgress();
    }

    function showNotifications() {
      document.getElementById("taskPage").classList.add("hidden");
      document.getElementById("notifyPage").classList.remove("hidden");
    }
  </script>
</body>
</html>
